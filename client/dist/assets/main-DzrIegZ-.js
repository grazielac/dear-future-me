(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))o(e);new MutationObserver(e=>{for(const t of e)if(t.type==="childList")for(const a of t.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&o(a)}).observe(document,{childList:!0,subtree:!0});function n(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?t.credentials="include":e.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function o(e){if(e.ep)return;e.ep=!0;const t=n(e);fetch(e.href,t)}})();const i=document.getElementById("letterForm"),d=document.getElementById("nameError"),m=document.getElementById("emailError"),c=document.getElementById("messageError");i.addEventListener("submit",async function(l){l.preventDefault(),d.textContent="",m.textContent="",c.textContent="",new FormData(i);const r=i.name.value.trim(),n=i.email.value.trim(),o=i.message.value.trim();let e=!1;r===""&&(d.textContent="Name is required.",e=!0),n===""&&(m.textContent="Email is required.",e=!0);const t=o.split(" ").filter(s=>s!=="");if(t.length<5?(c.textContent="Write at least 5 words.",e=!0):t.length>100&&(c.textContent="Max 100 words allowed.",e=!0),e)return;const a={name:r,email:n,message:o};try{const s=await fetch("http://localhost:3000/letters",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}),f=await s.json();console.log(f),s.ok?(alert("Letter sent!"),i.reset(),u()):alert("Something went wrong. Please try again.")}catch(s){console.error(s),alert("Error sending letter")}});async function u(){try{const r=await(await fetch("http://localhost:3000/letters")).json(),n=document.getElementById("lettersList");n.innerHTML="",r.forEach(o=>{const e=document.createElement("li");e.textContent=`${o.name}: ${o.message}`,n.appendChild(e)})}catch(l){console.error("Error fetching letters:",l)}console.log(list)}u();
