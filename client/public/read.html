<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dear Future Me</title>
    <link rel="stylesheet" href="/assets/style.css" />
    <script src="src/main.js" defer></script>
  </head>
  <body>
    <!--HEADER-->
    <header>
      <div class="header-wrapper">
        <div class="header">
          <div class="main-menu">
            <div class="main-links">
              <nav>
                <ul>
                  <li><a href="/">Home</a></li>
                  <li><a href="/about.html">About</a></li>
                  <li><a href="/read.html">Read Letters</a></li>
                  <li><a href="/write.html">Write Letter</a></li>
                </ul>
              </nav>
            </div>
          </div>
          <img src="" alt="logo" class="header-logo" />
          <div class="header-utility-links">
            <div class="search">
              <button class="search-btn">
                <img src="image/search.png" alt="search" />
              </button>
            </div>
            <div class="account">
              <button class="account-btn">
                <img src="image/account.png" alt="account" />
              </button>
            </div>
            <div class="dashboard">
              <button class="dash-btn">
                <img src="image/dashboard.png" alt="dashboard" />
              </button>
            </div>
          </div>
        </div>
      </div>
    </header>
    <!--END HEADER-->

    <ul id="lettersList"></ul>

    <!--FOOTER-->
    <footer>
      <div class="footer-container">
        <div class="nav-footer">
          <h4>About</h4>
          <nav>
            <ul>
              <li><a href="about.html">About</a></li>
              <li><a href="read.html">Read Letters</a></li>
              <li><a href="write.html">Write Letter</a></li>
            </ul>
          </nav>
        </div>
        <div class="signup-form">
          <div class="form-form">
            <h2>Stay in touch with your future self ðŸ’Œ</h2>
            <form>
              <input
                type="email"
                name="sub-email"
                placeholder="Your email"
                class="form-row"
              />
              <button type="submit" class="sub-btn">Join the journey</button>
              <p class="signup-note">
                By subscribing, you agree to recieve marketing email messages
                from DFM at the email address provided. Unsubscribe at any time.
              </p>
            </form>
          </div>
        </div>
      </div>
      <div class="footer-container">
        <div class="footer-policy">
          <ul>
            <li>Terms & Conditions</li>
            <li>Privacy Policy</li>
            <li>Accessibility</li>
            <li>Â© 2025, Dear Future Me</li>
          </ul>
        </div>
      </div>
    </footer>

<script>
  // GET DATA FROM THE SERVER and display it in the page
async function loadLetters() {
  try {
    // call server GET route
    const res = await fetch("http://localhost:3000/letters"); // sends a GET request to backend at /letters
    const letters = await res.json(); // response body converts from json -> javascript object/array

    // find the container
    const list = document.getElementById("lettersList");
    list.innerHTML = ""; // clear old content

    // display each letter into the page
    letters.forEach((letter) => {
      const li = document.createElement("li");
      li.textContent = `${letter.name}: ${letter.message}`; // show name + message
      list.appendChild(li); // add li into the list
    });
  } catch (error) {
    console.error("Error fetching letters:", error);
  }
  console.log(list);
}

loadLetters(); // run the function when the page loads

</script>

  </body>
</html>
